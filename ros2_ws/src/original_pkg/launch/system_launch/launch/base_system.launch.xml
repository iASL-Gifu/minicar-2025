<launch>
    <arg name="jetracer_control_topic" default="/jetracer/cmd_drive" description="launch vehicle"/>
    <arg name="autonomous_control_cmd" default="/ackermann_cmd" description="autonomous ackermann control command"/>

    <arg name="rosbag_trigger_topic" default="/rosbag2_recorder/trigger" description="rosbag trigger topic"/>

    <!-- JetRacer 制御ノードの起動 -->
    <include file="$(find-pkg-share jetracer_node)/launch/jetracer.launch.xml">
        <arg name="input_control_cmd" value="$(var jetracer_control_topic)"/>
    </include>

    <!-- Joy Manager ノード -->
    <include file="$(find-pkg-share joy_manager)/launch/teleop.launch.xml">
        <arg name="input_ackermann_cmd" value="$(var autonomous_control_cmd)"/>
        <arg name="output_control_cmd" value="$(var jetracer_control_topic)"/>
        <arg name="output_trigger_topic" value="$(var rosbag_trigger_topic)"/>
    </include>


    <!-- recording用 -->
    <group if="$(var record)">
        <!-- bag manager node -->
        <include file="$(find-pkg-share bag_manager_py)/launch/bag_manager_node.launch.xml">
            <arg name="input_trigger_topic" value="$(var rosbag_trigger_topic)"/>
        </include>
    </group>

</launch>
